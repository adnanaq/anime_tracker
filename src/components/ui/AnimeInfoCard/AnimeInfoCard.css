/* AnimeInfoCard Component Styles */
.anime-info-card {
  /* Base layout - responsive to container */
  width: 100%;
  height: 100%;
  padding: 0;
  color: white;
  display: flex;
  flex-direction: column;
  justify-content: space-between;
  min-height: 0; /* Allow flex shrinking */
}

/* Override Typography default colors and spacing for dark background context */
.anime-info-card .at-typography-base {
  color: rgba(255, 255, 255, 0.9) !important;
  margin: 0 !important;
  line-height: 1.3 !important;
}

/* Remove default bottom margins from Typography variants */
.anime-info-card .at-typography-body-small {
  margin-bottom: 0 !important;
}

.anime-info-card .at-typography-caption {
  margin-bottom: 0 !important;
}

.anime-info-card .at-typography-label {
  margin-bottom: 0 !important;
}

/* Specific opacity overrides for different elements */
.anime-info-card .at-typography-base.text-white\/70 {
  color: rgba(255, 255, 255, 0.7) !important;
}

.anime-info-card .at-typography-base.text-white\/80 {
  color: rgba(255, 255, 255, 0.8) !important;
}

/* Tighter spacing for metadata sections */
.anime-info-card .space-y-1\.5 > * + * {
  margin-top: 0.25rem !important;
}

.anime-info-card .space-y-2 > * + * {
  margin-top: 0.375rem !important;
}

/* Consistent spacing for all label-value pairs */
.anime-info-card .flex.items-start.space-x-2 {
  gap: 0.5rem;
}

.anime-info-card .flex.items-start.space-x-2 > * + * {
  margin-left: 0.5rem !important;
}

/* Ensure text renders properly without unexpected breaks */
.anime-info-card .at-typography-body-small {
  word-break: normal;
  overflow-wrap: break-word;
  hyphens: none;
}

/* Text alignment - justified for synopsis, left for metadata */
.anime-info-card .scrolling-synopsis .at-typography-base,
.anime-info-card .synopsis-text {
  text-align: justify;
  text-justify: inter-word;
}

/* Metadata text uses left alignment to avoid awkward spacing */
.anime-info-card .at-typography-body-small:not(.synopsis-text) {
  text-align: left;
}

/* Override Storybook typography fix for AnimeInfoCard context */
/* The Typography component gets a dark background in Storybook for visibility, */
/* but we want transparent background since we have our own gradient overlay */
.anime-info-card .at-typography-base.text-white {
  background-color: transparent !important;
  padding: 0 !important;
  border-radius: 0 !important;
}

/* Scrolling Synopsis Animation - responsive to available space */
.scrolling-synopsis {
  position: relative;
  overflow: hidden;
  max-height: 5rem; /* Default for standard cards (21rem height) */
  min-height: 3rem; /* Minimum readable height */
  margin-bottom: 0;
  flex: 1; /* Take available space in flex containers */
}

.scrolling-synopsis.long-text p {
  animation: scroll-text 25s linear infinite;
  animation-delay: 2s; /* Start scrolling after 2 seconds */
}

.scrolling-synopsis.short-text p {
  /* No animation for short text */
  display: -webkit-box;
  -webkit-line-clamp: 3;
  -webkit-box-orient: vertical;
  overflow: hidden;
}

/* Gradient fade effect for scrolling text */
.scrolling-synopsis::after {
  content: '';
  position: absolute;
  bottom: 0;
  left: 0;
  right: 0;
  height: 0.25rem;
  background: linear-gradient(to top, rgba(0, 0, 0, 0.2), rgba(0, 0, 0, 0.1), transparent);
  pointer-events: none;
  z-index: 1;
}

/* Keyframe animation for scrolling text */
@keyframes scroll-text {
  0% {
    transform: translateY(0);
  }
  20% {
    transform: translateY(0);
  }
  80% {
    transform: translateY(calc(-100% + 4.5rem));
  }
  100% {
    transform: translateY(calc(-100% + 4.5rem));
  }
}

/* Responsive design - scales with container size */

/* Small cards (height < 20rem) - compact layout */
.anime-info-card[style*="height"][style*="px"] {
  /* For very small cards, prioritize essential content */
}

/* Very small cards - minimal layout */
@media (max-width: 640px) {
  .anime-info-card .grid-cols-2 {
    grid-template-columns: 1fr;
    gap: 0.5rem;
  }
  
  .anime-info-card .space-y-1\.5 > * + * {
    margin-top: 0.25rem !important;
  }
  
  .scrolling-synopsis {
    max-height: 3rem; /* Smaller on mobile */
    min-height: 2rem;
  }
  
  @keyframes scroll-text {
    0% {
      transform: translateY(0);
    }
    20% {
      transform: translateY(0);
    }
    80% {
      transform: translateY(calc(-100% + 3rem));
    }
    100% {
      transform: translateY(calc(-100% + 3rem));
    }
  }
}

/* Large cards get more synopsis space */
.anime-info-card:has(.scrolling-synopsis) {
  /* When container is very tall, allow synopsis to grow */
}

/* Scale gaps and spacing based on available height */
.anime-info-card.large-card .mb-3 {
  margin-bottom: 1rem;
}

.anime-info-card.large-card .mb-4 {
  margin-bottom: 1.5rem;
}

.anime-info-card.large-card .scrolling-synopsis {
  max-height: 8rem;
}

/* Accessibility - Respect reduced motion preferences */
@media (prefers-reduced-motion: reduce) {
  .scrolling-synopsis.long-text p {
    animation: none;
    display: -webkit-box;
    -webkit-line-clamp: 3;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }
}